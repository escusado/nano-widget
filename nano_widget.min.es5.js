"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function includes(){for(var e=void 0,t=function b(){_classCallCheck(this,b)},n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];i.filter(function(e){return"NanoWidget"===e.name}).length&&(i.splice(i.indexOf(NanoWidget),1),t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(NanoWidget));var r=!0,a=!1,o=void 0;try{for(var l,h=i[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){var c=l.value,d=!0,u=!1,v=void 0;try{for(var f,p=Object.getOwnPropertyNames(c.prototype)[Symbol.iterator]();!(d=(f=p.next()).done);d=!0){var y=f.value;e=Object.getOwnPropertyDescriptor(c.prototype,y),"constructor"!==y&&"name"!==y&&Object.defineProperty(t.prototype,y,e)}}catch(m){u=!0,v=m}finally{try{!d&&p["return"]&&p["return"]()}finally{if(u)throw v}}}}catch(m){a=!0,o=m}finally{try{!r&&h["return"]&&h["return"]()}finally{if(a)throw o}}return t}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),CustomEvent=function(){function e(t,n){_classCallCheck(this,e),this.bubbles=!0,this.cancelable=!0,this.currentTarget=null,this.timeStamp=0,this.target=null,this.type="",this.isPropagationStopped=!1,this.isDefaultPrevented=!1,this.isImmediatePropagationStopped=!1,this.areImmediateHandlersPrevented=!1,this.type=t,"undefined"!=typeof n&&Object.assign(this,n)}return _createClass(e,[{key:"stopPropagation",value:function(){this.isPropagationStopped=!0}},{key:"preventDefault",value:function(){this.isDefaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.preventImmediateHandlers(),this.stopPropagation()}},{key:"preventImmediateHandlers",value:function(){this.areImmediateHandlersPrevented=!0}}]),e}(),NanoCustomEventSupport=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"bind",value:function(e,t){var n=void 0,i=void 0,s=void 0;for(this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),n=!1,s=this.eventListeners[e],i=0;i<s.length;i++)if(s[i]===t){n=!0;break}return n||this.eventListeners[e].push(t),this}},{key:"unbind",value:function(e,t){var n=void 0,i=void 0,s=void 0;for(i=!1,n=0,this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(this.eventListeners[e]=[]),s=this.eventListeners[e],n=0;n<s.length;n++)if(s[n]==t){i=!0;break}return i&&this.eventListeners[e].splice(n,1),this}},{key:"unbindAll",value:function(){return this.eventListeners&&(this.eventListeners=null),this}},{key:"dispatch",value:function(e,t){var n=void 0,i=void 0,s=void 0,r=void 0;for(this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(t={}),t.hasOwnProperty("target")===!1&&(t.target=this),n=new CustomEvent(e,t),i=this.eventListeners[e]||[],s=this,r=0;r<i.length&&(i[r].call(s,n),n.areImmediateHandlersPrevented!==!0);r+=1);return n}}]),e}(),NanoNodeSupport=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"appendChild",value:function(e){return e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),this.children.push(e),e.name&&(this[e.name]=e),e.setParent(this),e}},{key:"removeChild",value:function(e){var t=this.children.indexOf(e);return-1!==t&&(this.children.splice(t,1),delete this[e.name],e.parent=null),e}},{key:"setParent",value:function(e){return this.parent=e,this}},{key:"destroyChildren",value:function(){if(this.children)for(childrenLength=this.children.length;childrenLength>0;)this.children[0].destroyChildren(),this.children.length===childrenLength&&this.children.shift(),childrenLength--;return this.children=null,this}}]),e}(),NanoWidget=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),i={html:null,element:null,active:!1,disabled:!1,__destroyed:!1};Object.assign(i,e),Object.assign(n,i),n.element||(n.element=n._getElement()),n["class"]||(n["class"]=n._getClass());var s=!0,r=!1,a=void 0;try{for(var o,l=n["class"].split(" ")[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var h=o.value;h&&n.element.classList.add(h)}}catch(c){r=!0,a=c}finally{try{!s&&l["return"]&&l["return"]()}finally{if(r)throw a}}return n}return _inherits(t,e),_createClass(t,[{key:"_getClass",value:function(){return""}},{key:"_getElement",value:function(){var e=document.createElement("div"),t=this.html||this._getHTML().trim();return e.innerHTML=t,e.childNodes.length>1?e.childNodes:e.firstChild}},{key:"_getHTML",value:function(){return"<div></div>"}},{key:"render",value:function(e,t){return this.__destroyed===!0&&console.warn("calling on destroyed object"),this.dispatch("beforeRender",{element:e,beforeElement:t}),this._render(e,t),this.dispatch("render"),this}},{key:"_render",value:function(e,t){return t?e.insertBefore(this.element,t):e.appendChild(this.element),this}},{key:"activate",value:function(){return this.__destroyed&&console.warn("calling on destroyed object"),this.dispatch("beforeActivate"),this._activate(),this.dispatch("activate"),this}},{key:"_activate",value:function(){this.active=!0,this.element.classList.add("active")}},{key:"deactivate",value:function(){return this.__destroyed&&console.warn("calling on destroyed object"),this.dispatch("beforeDeactivate"),this._deactivate(),this.dispatch("deactivate"),this}},{key:"_deactivate",value:function(){this.active=!1,this.element.classList.remove("active")}},{key:"enable",value:function(){return this.__destroyed&&console.warn("calling on destroyed object"),this.dispatch("beforeEnable"),this._enable(),this.dispatch("enable"),this}},{key:"_enable",value:function(){this.disabled=!1,this.element.classList.remove("disabled")}},{key:"disable",value:function(){return this.__destroyed&&console.warn("calling on destroyed object"),this.dispatch("beforeDisable"),this._disable(),this.dispatch("disable"),this}},{key:"_disable",value:function(){this.disabled=!0,this.element.classList.add("disabled")}},{key:"destroy",value:function(){return this.__destroyed&&console.warn("calling on destroyed object"),this.dispatch("beforeDestroy"),this._destroy(),this.dispatch("destroy"),null}},{key:"_destroy",value:function(){this.destroyElement(),this.destroyChildren(),this.parent&&this.parent.removeChild(this),this.unbindAll(),this.__destroyed=!0}},{key:"destroyElement",value:function(){this.dispatch("beforeDestroyElement"),this._destroyElement(),this.dispatch("destroyElement")}},{key:"_destroyElement",value:function(){return this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this}}]),t}(includes(NanoCustomEventSupport,NanoNodeSupport));